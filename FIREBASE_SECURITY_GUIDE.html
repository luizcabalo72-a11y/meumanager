<!-- =========================================================
   GUIA DE PROTEÃ‡ÃƒO - FIREBASE QUOTAS E ALERTAS
   ProteÃ§Ã£o contra ataques DDoS e cobranÃ§as altas
========================================================= -->

# ğŸ›¡ï¸ GUIA DE PROTEÃ‡ÃƒO: FIREBASE QUOTAS E ALERTAS

## âš ï¸ URGENTE: Siga estes passos AGORA para proteger seu projeto

---

## 1ï¸âƒ£ CONFIGURAR QUOTAS NO FIREBASE CONSOLE

### Acesse o Console
1. VÃ¡ para [console.firebase.google.com](https://console.firebase.google.com)
2. Selecione projeto: **meumanager-b02b0**
3. VÃ¡ para **ConfiguraÃ§Ãµes do Projeto** (âš™ï¸ Engrenagem)

### Limitar OperaÃ§Ãµes de Firestore
4. Clique em **Quotas** (ou **Quotas and limits**)
5. Configure os seguintes limites:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FIRESTORE QUOTAS                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Leituras/minuto: 10.000               â”‚
â”‚ â€¢ Escritas/minuto: 5.000                â”‚
â”‚ â€¢ Deletions/minuto: 1.000               â”‚
â”‚ â€¢ Ãndices: 100                          â”‚
â”‚ â€¢ Tamanho mÃ¡x. doc: 1 MB                â”‚
â”‚ â€¢ Tamanho mÃ¡x. colecÃ£o: Ilimitado       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Limitar Cloud Functions
6. Clique em **Cloud Functions Quotas**
7. Configure:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CLOUD FUNCTIONS QUOTAS                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ InvocaÃ§Ãµes/segundo: 100               â”‚
â”‚ â€¢ Timeout: 60 segundos                  â”‚
â”‚ â€¢ MemÃ³ria: 512 MB                       â”‚
â”‚ â€¢ CPU concorrente: 1                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Limitar Authentication
8. VÃ¡ para **Authentication** > **Quotas**
9. Configure:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AUTH QUOTAS                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Sign-ups/hora: 100                    â”‚
â”‚ â€¢ Sign-in attempts/IP/6h: 50            â”‚
â”‚ â€¢ Password reset/email/day: 3           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2ï¸âƒ£ CONFIGURAR ALERTAS DE CUSTOS

### Google Cloud Budgets
1. VÃ¡ para [Google Cloud Console](https://console.cloud.google.com)
2. Navegue para **Billing** > **Budgets and alerts**
3. Clique em **Create Budget**

### Configure Alertas
```
Nome: Alerta Meu Manager
Budget: R$ 100/mÃªs (ajuste conforme necessÃ¡rio)

Thresholds:
â€¢ 50% do orÃ§amento â†’ Email de aviso
â€¢ 100% do orÃ§amento â†’ Email crÃ­tico
â€¢ 150% do orÃ§amento â†’ Email crÃ­tico

DestinatÃ¡rios: seu_email@dominio.com
```

---

## 3ï¸âƒ£ MONITORAMENTO EM TEMPO REAL

### Google Cloud Monitoring
1. Em [console.cloud.google.com](https://console.cloud.google.com)
2. Navegue para **Monitoring** > **Dashboards**
3. Crie um dashboard com:

```
MÃ‰TRICAS A MONITORAR:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Firestore                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… Documento reads/sec             â”‚
â”‚ âœ… Document writes/sec             â”‚
â”‚ âœ… Document deletes/sec            â”‚
â”‚ âœ… LatÃªncia (p99)                  â”‚
â”‚ âœ… Quota usage %                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cloud Functions                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… Execution count                 â”‚
â”‚ âœ… Execution times                 â”‚
â”‚ âœ… Errors                          â”‚
â”‚ âœ… Memory usage                    â”‚
â”‚ âœ… CPU usage                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Authentication                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… Sign-ups/dia                    â”‚
â”‚ âœ… Sign-ins/dia                    â”‚
â”‚ âœ… Failed attempts                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4ï¸âƒ£ IMPLANTAÃ‡ÃƒO DE FIRESTORE RULES

### Baixe Firebase CLI
```bash
# Windows PowerShell
npm install -g firebase-tools
firebase login
```

### Implante as Rules
```bash
# Na pasta do projeto
firebase deploy --only firestore:rules
```

---

## 5ï¸âƒ£ DETECÃ‡ÃƒO DE ATAQUES

### Sinais de Alerta ğŸš¨
Fique atento a:

```
âš ï¸ PICOS ANORMAIS:
â€¢ Leituras/segundo > 100 sem motivo
â€¢ Escritas/segundo > 50 sem motivo
â€¢ Cloud Functions invocaÃ§Ãµes > 500/min
â€¢ Erros 429 (Rate limited) frequentes
â€¢ RequisiÃ§Ãµes de IP's diferentes incomuns

âš ï¸ PADRÃ•ES SUSPEITOS:
â€¢ Buscas sem usuÃ¡rio autenticado
â€¢ Deletions em massa
â€¢ Scritaqs para colecÃµes nÃ£o esperadas
â€¢ RequisiÃ§Ãµes do exterior (se app Ã© local)
```

### Resposta a Ataque
```
1. â¹ï¸ Bloquear IP na sua WAF (se houver)
2. ğŸ“Š Consultar logs no Monitoring
3. ğŸ” Desabilitar Firestore temporariamente:
   - Console > Firestore > Desabilitar
4. ğŸ›¡ï¸ Revisar Security Rules
5. ğŸ”” Contatar suporte Google Cloud
```

---

## 6ï¸âƒ£ CHECKLIST DE SEGURANÃ‡A

```
âœ… IMPLEMENTADO:
[ ] API Key removida do frontend
[ ] Firestore Security Rules ativa
[ ] Rate Limiting em Cloud Functions
[ ] Quotas configuradas
[ ] Alertas de custos ativa
[ ] Monitoring ativa
[ ] Backup automÃ¡tico habilitado
[ ] AutenticaÃ§Ã£o 2FA ativa (sua conta Google)

â³ REVISAR REGULARMENTE:
[ ] Logs de acesso (1x/semana)
[ ] Custos de billing (1x/semana)
[ ] Tentativas falhadas (diÃ¡rias)
[ ] Performance (diÃ¡rias)
```

---

## 7ï¸âƒ£ CUSTOS ESTIMADOS (Com ProteÃ§Ã£o)

```
CENÃRIO TÃPICO:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Uso Normal (100 usuÃ¡rios)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Authentication:        R$ 0,00       â”‚
â”‚ Firestore:            R$ 10-20       â”‚
â”‚ Cloud Functions:      R$ 5-10        â”‚
â”‚ Storage:              R$ 2-5         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚ TOTAL/MÃŠS:            R$ 20-50       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

COM ATAQUE (Se desprotegido):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1 hora de ataque DDoS:               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Leituras: 10M x $0.06/1M = R$ 600   â”‚
â”‚ Escritas: 5M x $0.18/1M = R$ 900    â”‚
â”‚ Functions: 1M x $0.0000004 = R$ 400 â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚ DANO: AtÃ© R$ 2.000+ por hora! ğŸ˜±    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8ï¸âƒ£ REFERÃŠNCIAS

### Google Cloud Documentation
- [Firestore Security Rules](https://firebase.google.com/docs/firestore/security/start)
- [Cloud Functions Rate Limiting](https://cloud.google.com/functions/quotas)
- [Firebase Quotas](https://firebase.google.com/docs/database/usage/best-practices)

### Best Practices
- [OWASP Firebase Security](https://owasp.org/www-community/attacks/Firebase_Security)
- [Google Cloud Security](https://cloud.google.com/security)

---

## âš ï¸ PRÃ“XIMOS PASSOS

1. **HOJE**: Implementar este guia
2. **HOJE**: Revisar firebase-secure.js
3. **HOJE**: Fazer deploy das Security Rules
4. **AMANHÃƒ**: Testar rate limiting
5. **SEMANA**: Monitorar mÃ©tricas
6. **MÃŠS**: Revisar custos

---

**DÃºvidas?** Consulte o suporte do Google Cloud ou Firebase.
**EmergÃªncia?** VocÃª pode desabilitar temporariamente o Firestore no console.

ğŸ”’ **SeguranÃ§a em primeiro lugar!**
